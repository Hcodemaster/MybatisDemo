<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mybatis.mapper.PersonMapper">

    <sql id="baseColumn">
         id, name, age
    </sql>

    <insert id="batchInsert" >
        insert into
        person(name, age)
        values
        <foreach collection="list" index="index" item="item" separator=",">
            (#{item.name},#{item.age})
        </foreach>
    </insert>

    <update id="updatePerson">
        update person
        set age = #{person.age}
        where
        <if test="#{person.name} != null}">
            person.name = #{person.name}
        </if>
    </update>

    <select id="getPersonByName" resultType="com.example.mybatis.model.Person">
        select <include refid="baseColumn"></include>
        from person
        where
        name=#{name, jdbcType=VARCHAR}
    </select>

</mapper>